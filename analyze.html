<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse de Donn√©es - ParkinsonDetect</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom Stylesheets -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/analyze.css">
    
    <!-- SEO and Meta Tags -->
    <meta name="description" content="Analyse de donn√©es de mouvement pour la d√©tection pr√©coce de la maladie de Parkinson utilisant des technologies avanc√©es.">
    <meta name="keywords" content="Parkinson's disease, motion analysis, machine learning, healthcare, medical technology">
    <meta name="author" content="ParkinsonDetect Research Team">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Analyse de Donn√©es - ParkinsonDetect">
    <meta property="og:description" content="Analysez vos donn√©es de mouvement pour la d√©tection pr√©coce de Parkinson">
    <meta property="og:type" content="website">
</head>
<body>
    <!-- Professional Loading Spinner -->
    <div id="preloader" class="preloader">
        <div class="preloader-content">
            <div class="logo-loader">
                <div class="logo-icon">üß†</div>
                <div class="logo-text">ParkinsonDetect</div>
            </div>
            <div class="spinner-container">
                <div class="spinner-modern"></div>
                <div class="spinner-ring"></div>
            </div>
            <div class="loading-text">Chargement de l'analyse...</div>
            <div class="loading-subtext">IA m√©dicale ‚Ä¢ D√©tection pr√©coce</div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-top">
            <div class="container">
                <div class="header-contact">
                    <span>üìß research@parkinsondetect.com</span>
                </div>
                <div class="header-social">
                    <span style="opacity: 0.9; font-style: italic;">Sciences de Donn√©es ‚Ä¢ G√©nie Logiciel et R√©seaux</span>
                </div>
            </div>
        </div>
        
        <div class="header-main">
            <div class="container">
                <a href="index.html" class="logo">
                <!-- Production: href="index" -->
                    <div class="logo-icon">üß†</div>
                    <div>
                        <div>ParkinsonDetect</div>
                        <div style="font-size: 0.6rem; opacity: 0.8; font-weight: normal;">D√©tection pr√©coce de la maladie de Parkinson</div>
                    </div>
                </a>
                
                <nav class="nav-menu">
                    <a href="index.html" class="nav-link">Accueil</a>
                    <a href="index.html#technologie" class="nav-link">Technologie</a>
                    <!-- <a href="index.html#feuille-de-route" class="nav-link">Feuille de route</a> -->
                    <a href="index.html#a-propos" class="nav-link">√Ä propos</a>
                    <a href="analyze.html" class="nav-link active">Analyse</a>
                    <a href="index.html#contact" class="nav-link">Contact</a>
                </nav>
                
                <!-- User Avatar Dropdown (shown when logged in) -->
                <div class="user-avatar-container" id="userAvatarContainer">
                    <div class="user-avatar" id="userAvatar">
                        <span id="avatarInitials">U</span>
                    </div>
                    <div class="avatar-dropdown" id="avatarDropdown">
                        <div class="dropdown-header">
                            <div class="dropdown-user-name" id="dropdownUserName">Utilisateur</div>
                            <div class="dropdown-user-email" id="dropdownUserEmail">user@example.com</div>
                        </div>
                        <div class="dropdown-menu">
                            <a href="profile.html" class="dropdown-item">
                                <i>üë§</i> Profil
                            </a>
                            <div class="dropdown-divider"></div>
                            <button class="dropdown-item dropdown-logout" onclick="ParkinsonDetect.logout()">
                                <i>üö™</i> D√©connexion
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="header-actions" id="headerActions">
                    <a href="login.html" class="login-btn">Connexion</a>
                    <a href="signup.html" class="signup-btn">Inscription</a>
                </div>
                
                <button class="mobile-menu">‚ò∞</button>
            </div>
        </div>
    </header>

    <!-- Main Analysis Section -->
    <main class="fade-in-on-scroll">
        <section class="analysis-hero fade-in-on-scroll">
            <div class="container">
                <h1 class="hero-title fade-in-on-scroll">Analyse de Donn√©es de Mouvement</h1>
                <div class="hero-description fade-in-on-scroll">
                    T√©l√©chargez votre fichier ZIP contenant accelerometer.csv et gyroscope.csv pour une analyse avanc√©e 
                    utilisant notre syst√®me de d√©tection pr√©coce de Parkinson.
                </div>
            </div>
        </section>

        <section class="analysis-section section fade-in-on-scroll">
            <div class="container">
                <!-- Modern Login Banner -->
                <div class="login-info-card stagger-item" id="loginBanner">
                    <div class="info-card-content">
                        <div class="info-icon">üöÄ</div>
                        <div class="info-text">
                            <h4>Analyse instantan√©e disponible</h4>
                            <p>Vous pouvez analyser vos donn√©es imm√©diatement ou vous connecter pour sauvegarder vos r√©sultats dans votre profil</p>
                        </div>
                        <div class="info-actions">
                            <a href="login.html" class="btn btn-primary btn-sm">Se connecter</a>
                            <a href="signup.html" class="btn btn-secondary btn-sm">Cr√©er un compte</a>
                            <button class="info-close" onclick="hideBanner()" title="Masquer cette notification">√ó</button>
                        </div>
                    </div>
                </div>

                <!-- Modern Upload Area -->
                <div class="upload-area stagger-item" onclick="document.getElementById('fileInput').click()">
                    <div class="upload-icon">üóÉÔ∏è</div>
                    <div class="upload-text">Cliquez pour t√©l√©charger les donn√©es de capteur</div>
                    <div class="upload-subtext">Fichier ZIP contenant accelerometer.csv et gyroscope.csv (Max 50MB)</div>
                    <input type="file" id="fileInput" class="file-input" accept=".zip" aria-label="S√©lectionner un fichier ZIP contenant les donn√©es de capteur">
                </div>
                
                <div style="text-align: center; margin-top: 30px;" class="stagger-item">
                    <button class="btn btn-primary" id="analyzeBtn" disabled>
                        ‚ú® Analyser les Donn√©es de Mouvement
                    </button>
                </div>
                
                <!-- Enhanced Loading -->
                <div class="loading" id="loadingSpinner">
                    <div class="spinner"></div>
                    <p>Analyse de vos donn√©es de mouvement...</p>
                    <p style="font-size: 0.9rem; color: #666;">Traitement des sch√©mas d'acc√©l√©rom√®tre et gyroscope</p>
                </div>
                
                <!-- Enhanced Results Card -->
                <div class="result-card enhanced-result fade-in-on-scroll" id="resultCard" style="display: none;">
                    <!-- Result Header with Animation -->
                    <div class="result-header-enhanced stagger-item">
                        <div class="result-status-icon" id="statusIcon">‚úÖ</div>
                        <div class="result-title-section">
                            <h2 class="result-title">R√©sultats d'Analyse M√©dicale</h2>
                            <p class="result-subtitle">D√©tection pr√©coce de la maladie de Parkinson</p>
                        </div>
                        <div class="analysis-badge">
                            <span class="badge-text">Technologie M√©dicale</span>
                        </div>
                    </div>

                    <!-- Main Result Display -->
                    <div class="main-result-container stagger-item">
                        <div class="result-visualization">
                            <div class="result-circle-enhanced">
                                <div class="result-movement-type" id="movementType"></div>
                                <div class="result-classification" id="resultLabel"></div>
                                <div class="result-confidence">Confiance √âlev√©e</div>
                            </div>
                            
                            <!-- Enhanced Score Meter -->
                            <div class="score-meter-container-enhanced">
                                <div class="score-label">Score de Reconstruction</div>
                                <div class="score-meter-enhanced">
                                    <div class="score-track">
                                        <div class="score-indicator" id="scoreIndicator"></div>
                                        <div class="score-bar-enhanced" id="scoreBar"></div>
                                    </div>
                                </div>
                                <div class="score-value-display">
                                    <span class="score-number" id="scoreValue"></span>
                                </div>
                                <div class="score-interpretation-enhanced" id="scoreInterpretation">
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Technical Details -->
                        <div class="technical-details-enhanced stagger-item" style="display:none;">
                            <h4>D√©tails Techniques de l'Analyse</h4>
                            
                            <div class="details-grid">
                                <div class="detail-card">
                                    <div class="detail-icon">üìä</div>
                                    <div class="detail-content">
                                        <div class="detail-value" id="windowsCount"></div>
                                        <div class="detail-label">Fen√™tres d'Analyse</div>
                                        <div class="detail-description">Segments de donn√©es analys√©s</div>
                                    </div>
                                </div>
                                
                                <div class="detail-card">
                                    <div class="detail-icon">üéØ</div>
                                    <div class="detail-content">
                                        <div class="detail-value" id="thresholdValue"></div>
                                        <div class="detail-label">Seuil de D√©tection</div>
                                        <div class="detail-description">Limite de classification syst√®me</div>
                                    </div>
                                </div>
                                
                                <div class="detail-card">
                                    <div class="detail-icon">‚ö°</div>
                                    <div class="detail-content">
                                        <div class="detail-value">20Hz</div>
                                        <div class="detail-label">Fr√©quence d'√âchantillonnage</div>
                                        <div class="detail-description">Mesures par seconde</div>
                                    </div>
                                </div>
                                
                                <div class="detail-card">
                                    <div class="detail-icon">üìè</div>
                                    <div class="detail-content">
                                        <div class="detail-value">100</div>
                                        <div class="detail-label">Taille de Fen√™tre</div>
                                        <div class="detail-description">Points de donn√©es par segment</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Analysis Summary -->
                        <div class="analysis-summary stagger-item">
                            <h4>R√©sum√© de l'Analyse</h4>
                            <div class="summary-content" id="summaryContent">
                                <p class="summary-text">
                                </p>
                                <div class="analysis-metrics">
                                    <div class="metric-item">
                                        <span class="metric-label">Temps d'analyse:</span>
                                        <span class="metric-value" id="analysisTime"></span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Qualit√© des donn√©es:</span>
                                        <span class="metric-value quality-good"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Medical Disclaimer -->
                        <div class="medical-disclaimer stagger-item">
                            <div class="disclaimer-icon">‚öïÔ∏è</div>
                            <div class="disclaimer-content">
                                <strong>Avertissement M√©dical:</strong>
                                Ce r√©sultat est √† des fins de recherche uniquement et ne remplace pas un diagnostic m√©dical professionnel. 
                                Consultez toujours un m√©decin pour une √©valuation compl√®te.
                            </div>
                        </div>
                    </div>
                    
                    <!-- Enhanced Action Buttons -->
                    <div class="result-actions-enhanced stagger-item">
                        <button class="btn-enhanced btn-save" onclick="saveAnalysisResults()" id="saveResultsBtn" style="display: none;">
                            <span class="btn-icon">üíæ</span>
                            <span class="btn-text">Sauvegarder dans le Profil</span>
                        </button>
                        <button class="btn-enhanced btn-download" onclick="downloadReport()">
                            <span class="btn-icon">üìÑ</span>
                            <span class="btn-text">T√©l√©charger Rapport D√©taill√©</span>
                        </button>
                        <button class="btn-enhanced btn-login" onclick="window.location.href='login'" id="loginToSaveBtn">
                            <span class="btn-icon">üîê</span>
                            <span class="btn-text">Se connecter pour sauvegarder</span>
                        </button>
                        <button class="btn-enhanced btn-new" onclick="location.reload()">
                            <span class="btn-icon">üîÑ</span>
                            <span class="btn-text">Nouvelle Analyse</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>


    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ParkinsonDetect</h3>
                    <p style="color: #bdc3c7; line-height: 1.6; margin-bottom: 20px;">
                        Plateforme technologique pour la d√©tection pr√©coce de la maladie de Parkinson utilisant l'analyse des donn√©es de capteurs de mouvement.
                    </p>
                    <div class="social-links">
                        <a href="#" title="GitHub">üíª</a>
                        <a href="#" title="Research Papers">üìÑ</a>
                        <a href="#" title="LinkedIn">üíº</a>
                        <a href="#" title="Contact">üìß</a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Recherche</h3>
                    <a href="#">M√©thodologie</a>
                    <a href="#">Dataset PADS</a>
                    <a href="#">Publications</a>
                    <a href="#">Validation Clinique</a>
                    <a href="#">R√©sultats</a>
                </div>
                
                <div class="footer-section">
                    <h3>Plateforme</h3>
                    <a href="analyze.html">Analyse de Mouvement</a>
                    <a href="#">API Documentation</a>
                    <a href="#">Guide d'utilisation</a>
                    <a href="#">T√©l√©charger App</a>
                    <a href="#">Int√©grations</a>
                </div>
                
                <div class="footer-section">
                    <h3>Support</h3>
                    <a href="#">Centre d'aide</a>
                    <a href="index#contact">Contact √âquipe</a>
                    <a href="#">Support Technique</a>
                    <a href="#">Formation</a>
                    <a href="#">FAQ</a>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
                    <div>
                        <p>&copy; 2024 ParkinsonDetect. Projet de recherche en IA m√©dicale.</p>
                        <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 5px;">
                            Sciences de Donn√©es ‚Ä¢ G√©nie Logiciel et R√©seaux ‚Ä¢ Universit√©
                        </p>
                    </div>
                    <div style="display: flex; gap: 15px; margin-top: 10px; font-size: 0.9rem;">
                        <span>üèÜ Technologie Valid√©e</span>
                        <span>üîí S√©curis√©</span>
                        <span>‚öôÔ∏è Open Source</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript Files -->
    <script src="assets/js/charts.js"></script>
    <script src="assets/js/dataManager.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
        // Hide banner function
        function hideBanner() {
            const banner = document.getElementById('loginBanner');
            if (banner) {
                banner.style.display = 'none';
                // Store dismissal for current session only (not persistent across reloads)
                sessionStorage.setItem('loginBannerDismissed', 'true');
            }
        }

        // Check if banner should be shown
        document.addEventListener('DOMContentLoaded', function() {
            // Hide preloader
            const preloader = document.getElementById('preloader');
            if (preloader) {
                setTimeout(() => {
                    preloader.style.opacity = '0';
                    setTimeout(() => {
                        preloader.style.display = 'none';
                    }, 500);
                }, 800); // Show preloader for 800ms
            }
            
            const isLoggedIn = ParkinsonDetect && ParkinsonDetect.isLoggedIn && ParkinsonDetect.isLoggedIn();
            const wasDismissedThisSession = sessionStorage.getItem('loginBannerDismissed') === 'true';
            const banner = document.getElementById('loginBanner');
            
            // Hide banner if user is logged in OR if dismissed during this session
            if (banner && (isLoggedIn || wasDismissedThisSession)) {
                banner.style.display = 'none';
            }
            
            // Update button visibility based on login status
            updateSaveButtonVisibility();
            
            // Initialize scroll animations
            if (typeof initScrollAnimations === 'function') {
                initScrollAnimations();
            }
        });

        function updateSaveButtonVisibility() {
            const isLoggedIn = ParkinsonDetect && ParkinsonDetect.isLoggedIn && ParkinsonDetect.isLoggedIn();
            const saveBtn = document.getElementById('saveResultsBtn');
            const loginBtn = document.getElementById('loginToSaveBtn');
            
            if (isLoggedIn) {
                if (saveBtn) saveBtn.style.display = 'inline-block';
                if (loginBtn) loginBtn.style.display = 'none';
            } else {
                if (saveBtn) saveBtn.style.display = 'none';
                if (loginBtn) loginBtn.style.display = 'inline-block';
            }
        }

        function saveAnalysisResults() {
            if (ParkinsonDetect && ParkinsonDetect.saveResults) {
                ParkinsonDetect.saveResults();
            }
        }

        function downloadReport() {
            if (ParkinsonDetect && ParkinsonDetect.downloadReport) {
                ParkinsonDetect.downloadReport();
            } else {
                // Show notification that no analysis has been performed yet
                alert('Veuillez d\'abord effectuer une analyse avant de t√©l√©charger un rapport.');
            }
        }
    </script>
</body>
</html>